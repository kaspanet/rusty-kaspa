# unit tests
cargo nextest run --release
if [ $? -ne 0 ]; then
    echo "Failed to run tests"
    exit 1
fi

# integration tests
cargo nextest run --release --workspace -p kaspa-testing-integration --lib
cargo nextest run --release -p kaspa-testing-integration --lib --features devnet-prealloc -- rpc_tests::base_test

# wasm build (tests for potential multiple exports of the same symbol)
pushd .
cd wasm
./build-node
popd
